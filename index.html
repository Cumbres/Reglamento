<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reglamento Interno - Condominio Cumbres de Quilpué</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e67e22;
            --background-color: #f8f9fa;
            --text-color: #34495e;
            --card-bg-color: #ffffff;
            --border-color: #e9ecef;
            --shadow-color: rgba(0, 0, 0, 0.07);
            --success-color: #27ae60;
            --danger-color: #c0392b;
            --highlight-bg-color: #f1c40f;
            --highlight-text-color: #333;
        }

        body.dark-mode {
            --primary-color: #ecf0f1;
            --secondary-color: #3498db;
            --accent-color: #e67e22;
            --background-color: #1c2833;
            --text-color: #bdc3c7;
            --card-bg-color: #2c3e50;
            --border-color: #3a5064;
            --shadow-color: rgba(0, 0, 0, 0.2);
            --highlight-bg-color: #f39c12;
            --highlight-text-color: #fff;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html { scroll-behavior: smooth; }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.7;
            color: var(--text-color);
            background-color: var(--background-color);
            font-size: 16px;
            transition: font-size 0.3s ease, background-color 0.4s ease, color 0.4s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            font-family: 'Playfair Display', serif;
            color: var(--primary-color);
            text-align: center;
            font-size: 2.4rem; /* Reduced font size */
            line-height: 1.3;
            margin-top: 30px; /* Adjusted margin */
            margin-bottom: 40px; /* Adjusted margin */
            padding-bottom: 15px; /* Adjusted padding */
            border-bottom: 2px solid var(--secondary-color); /* Thinner border */
            letter-spacing: 1px;
            transition: color 0.4s ease;
        }

        #control-panel {
            position: sticky;
            top: 10px;
            z-index: 1000;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 15px;
            background-color: var(--card-bg-color);
            opacity: 0.95;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            box-shadow: 0 4px 20px var(--shadow-color);
            gap: 15px;
            transition: background-color 0.4s ease, border-color 0.4s ease;
        }

        #search-container { display: flex; flex-grow: 1; max-width: 450px; }
        #search-input {
            flex-grow: 1; padding: 12px 15px; font-size: 1rem;
            border: 1px solid var(--border-color); border-radius: 8px 0 0 8px; outline: none;
            background-color: var(--background-color); color: var(--text-color);
            transition: all 0.3s;
        }
        #search-input:focus { border-color: var(--secondary-color); box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2); }
        #search-button {
            background-color: var(--secondary-color); color: white; border: none; padding: 0 20px;
            font-size: 1.1rem; cursor: pointer; border-radius: 0 8px 8px 0; transition: background-color 0.3s;
        }
        #search-button:hover { background-color: #2980b9; }

        #button-container { display: flex; gap: 10px; }
        #button-container button {
            background-color: var(--background-color); color: var(--primary-color);
            border: 1px solid var(--border-color); width: 45px; height: 45px; font-size: 1rem;
            cursor: pointer; border-radius: 8px; transition: all 0.3s ease;
            display: flex; align-items: center; justify-content: center;
        }
        #button-container button:hover {
            background-color: var(--secondary-color); color: white;
            border-color: var(--secondary-color); transform: translateY(-2px);
        }
        #whatsapp-button { background-color: #25D366; color: white; border: none; }
        #whatsapp-button:hover { background-color: #128C7E; }
        #alert-button { background-color: #e74c3c; color: white; border: none; }
        #alert-button:hover { background-color: #c0392b; }

        /* Article Styles */
        .article {
            background-color: var(--card-bg-color); margin-bottom: 15px; border-radius: 12px;
            box-shadow: 0 4px 15px var(--shadow-color); transition: all 0.4s ease; overflow: hidden;
        }
        .article:hover { box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1); }
        body.dark-mode .article:hover { box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3); }

        .article-title {
            cursor: pointer; font-weight: 500; font-size: 1.2rem; display: flex;
            align-items: center; padding: 20px 25px; user-select: none;
        }
        .article-title i.fa-info-circle, .article-title i.fas {
            margin-right: 15px; font-size: 1.5rem; width: 30px;
            text-align: center; color: var(--secondary-color);
        }
        .article-title .chevron-icon { margin-left: auto; transition: transform 0.3s ease; font-size: 1rem; }
        .article.active .chevron-icon { transform: rotate(180deg); }

        .article-content {
            max-height: 0; overflow: hidden;
            transition: max-height 0.5s ease-in-out, padding-top 0.5s ease-in-out, padding-bottom 0.5s ease-in-out;
            padding-left: 70px; padding-right: 25px;
        }
        .article.active .article-content { padding-top: 10px; padding-bottom: 25px; max-height: 5000px; }
        .article-content p, .article-content ul, .article-content ol { margin-bottom: 1rem; }
        .article-content ul, .article-content ol { padding-left: 20px; }
        .article-content strong { color: var(--primary-color); transition: color 0.4s ease; }
        .article-content a { color: var(--secondary-color); text-decoration: none; font-weight: 500; }
        .article-content a:hover { text-decoration: underline; }

        /* Search Highlight */
        .search-highlight-permanent {
            background-color: var(--highlight-bg-color);
            color: var(--highlight-text-color);
            border-radius: 3px;
            padding: 1px 3px;
            transition: background-color 0.4s ease, color 0.4s ease;
        }

        /* Schedule Cards */
        .schedule-container {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); /* Adjusted minmax */
            gap: 15px; margin: 20px 0;
        }
        .schedule-card-detailed { border-radius: 10px; overflow: hidden; border: 1px solid var(--border-color); }
        .schedule-card-detailed .header {
            padding: 12px 15px; /* Reduced padding */
            color: white; font-weight: 700; font-size: 1rem; /* Reduced font size */
            display: flex; align-items: center; gap: 10px;
        }
        .schedule-card-detailed .header.allowed { background-color: var(--success-color); }
        .schedule-card-detailed .header.prohibited { background-color: var(--danger-color); }
        .schedule-card-detailed .body { padding: 15px; background-color: var(--card-bg-color); transition: background-color 0.4s ease; }
        .schedule-card-detailed .body p { margin: 0; font-size: 0.95rem; /* Reduced font size */ }
        .schedule-card-detailed .body .day { font-weight: 700; color: var(--primary-color); margin-bottom: 5px; transition: color 0.4s ease; }
        .schedule-card-detailed .body .time { font-size: 1.2rem; /* Reduced font size */ font-weight: 500; color: var(--text-color); margin-bottom: 5px; transition: color 0.4s ease; }
        .schedule-card-detailed .body .time-block { margin-bottom: 10px; }
        .schedule-card-detailed .body .time-block:last-child { margin-bottom: 0; }
        .schedule-card-detailed .body .status { font-weight: 700; font-size: 1.2rem; /* Reduced font size */ text-align: center; }

        /* Popups */
        .popup {
            display: none; position: fixed; z-index: 1001; left: 0; top: 0; width: 100%; height: 100%;
            overflow: auto; background-color: rgba(0,0,0,0.5); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px);
            align-items: center; justify-content: center;
        }
        .popup.show { display: flex; }
        .popup-content {
            background-color: var(--card-bg-color); padding: 30px 40px; border-radius: 15px;
            width: 90%; max-width: 600px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            position: relative; animation: fadeIn 0.3s ease-out;
            transition: background-color 0.4s ease;
        }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .popup-content h3 { color: var(--primary-color); margin-bottom: 20px; font-size: 1.5rem; transition: color 0.4s ease; }
        .popup-content .close {
            position: absolute; top: 15px; right: 20px; color: #aaa; font-size: 32px;
            font-weight: bold; cursor: pointer; transition: color 0.2s;
        }
        .popup-content .close:hover { color: var(--danger-color); }
        .popup-buttons { display: flex; justify-content: flex-end; gap: 10px; margin-top: 25px; }
        .popup-buttons button {
            padding: 12px 25px; border-radius: 8px; border: none; cursor: pointer;
            font-size: 1rem; font-weight: 500; transition: all 0.3s ease;
        }
        .popup-buttons .confirm-btn { background-color: var(--secondary-color); color: white; }
        .popup-buttons .confirm-btn:hover { background-color: #2980b9; }
        .popup-buttons .cancel-btn { background-color: var(--border-color); color: var(--text-color); }
        .popup-buttons .cancel-btn:hover { background-color: #bdc3c7; }
        #tip-text { font-size: 1.1rem; margin-bottom: 10px; }
        #tip-source { font-style: italic; color: #7f8c8d; }
        #next-tip { background-color: var(--accent-color); color: white; }
        #next-tip:hover { background-color: #d35400; }
        #search-results-content { max-width: 800px; }
        #search-results { max-height: 60vh; overflow-y: auto; margin-top: 20px; }
        .search-result-item { padding: 15px; border-bottom: 1px solid var(--border-color); cursor: pointer; transition: background-color 0.2s, border-color 0.4s ease; }
        .search-result-item:last-child { border-bottom: none; }
        .search-result-item:hover { background-color: var(--background-color); }
        .search-result-item strong { color: var(--secondary-color); }
        .search-result-item .highlight { background-color: var(--highlight-bg-color); color: var(--highlight-text-color); border-radius: 3px; padding: 0 2px;}

        table { width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 0.95rem; }
        th, td { border: 1px solid var(--border-color); padding: 12px; text-align: left; transition: border-color 0.4s ease; }
        th { background-color: var(--background-color); font-weight: bold; color: var(--primary-color); transition: background-color 0.4s ease, color 0.4s ease; }
        tr:nth-child(even) { background-color: #f9f9f9; }
        body.dark-mode tr:nth-child(even) { background-color: #34495e; }

        footer { margin-top: 50px; padding: 30px; background-color: var(--primary-color); text-align: center; font-size: 0.9rem; color: #bdc3c7; transition: background-color 0.4s ease; }

        @media screen and (max-width: 768px) {
            h1 { font-size: 2rem; }
            #control-panel { flex-direction: column; align-items: stretch; top: 0; border-radius: 0; }
            #search-container { max-width: none; }
            #button-container { justify-content: center; margin-top: 15px; }
            .article-title { font-size: 1.1rem; padding: 15px 20px; }
            .article-content { padding-left: 20px; padding-right: 20px; }
        }
    </style>
</head>
<body>

<div class="container">

    <!-- Popups -->
    <div id="tip-popup" class="popup"><div class="popup-content"><span class="close" data-popup-id="tip-popup">&times;</span><h3><i class="fas fa-lightbulb" style="color: var(--accent-color);"></i> Tip del Día</h3><p id="tip-text"></p><p id="tip-source"></p><div class="popup-buttons"><button id="next-tip" class="confirm-btn">Siguiente Tip</button></div></div></div>
    <div id="whatsapp-popup" class="popup"><div class="popup-content"><span class="close" data-popup-id="whatsapp-popup">&times;</span><h3><i class="fab fa-whatsapp" style="color: #25D366;"></i> Contacto con Conserjería</h3><p>A este número se contactará a WhatsApp de conserjería, para informar cualquier problema, irregularidad u otro tema que corresponda. ¿Desea continuar?</p><div class="popup-buttons"><button id="cancel-whatsapp" class="cancel-btn">Cancelar</button><button id="confirm-whatsapp" class="confirm-btn">Sí, continuar</button></div></div></div>
    <div id="alert-popup" class="popup"><div class="popup-content"><span class="close" data-popup-id="alert-popup">&times;</span><h3><i class="fas fa-exclamation-triangle" style="color: #e74c3c;"></i> Reportar Infracción</h3><p>Esto abrirá su aplicación de correo electrónico para enviar un reporte de infracción al Comité y a la Administración. ¿Está seguro que desea continuar?</p><div class="popup-buttons"><button id="cancel-alert" class="cancel-btn">Cancelar</button><button id="confirm-alert" class="confirm-btn" style="background-color: #c0392b;">Sí, reportar</button></div></div></div>
    <div id="search-results-popup" class="popup"><div id="search-results-content" class="popup-content"><span class="close" data-popup-id="search-results-popup">&times;</span><h3>Resultados de la Búsqueda</h3><div id="search-results"></div></div></div>

    <header>
        <div id="control-panel">
            <div id="search-container">
                <input type="text" id="search-input" placeholder="Buscar en el reglamento...">
                <button id="search-button" aria-label="Buscar"><i class="fas fa-search"></i></button>
            </div>
            <div id="button-container">
                <button id="decrease-font" aria-label="Disminuir tamaño de letra">A-</button>
                <button id="increase-font" aria-label="Aumentar tamaño de letra">A+</button>
                <button id="theme-toggle" aria-label="Cambiar tema"><i class="fas fa-moon"></i></button>
                <button id="show-tip" aria-label="Mostrar tip del día"><i class="fas fa-info-circle"></i></button>
                <button id="whatsapp-button" aria-label="Contactar por WhatsApp"><i class="fab fa-whatsapp"></i></button>
                <button id="alert-button" aria-label="Reportar infracción"><i class="fas fa-exclamation-triangle"></i></button>
            </div>
        </div>
        <h1>Reglamento Interno<br>Condominio Cumbres de Quilpué</h1>
    </header>

    <main id="articles-container"></main>

</div>

<footer>
  <p>Diseñado por el Comité de Cumbres de Quilpué. &copy; 2024 Todos los derechos reservados.</p>
</footer>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const articlesData = [
        { id: 'intro', icon: 'fas fa-info-circle', title: 'Introducción: Disposiciones Generales', content: `<p>El presente Reglamento de Normas Internas ha sido dictado por el Comité Administración y por la administración conforme a lo establecido en la Ley 21.442 sobre la Copropiedad Inmobiliaria y Reglamento de Copropiedad de la comunidad, el que se da por conocido de todo habitante, residente y usuario de departamentos y/o locales comerciales a cualquier título, que tiene por objetivo principalmente lo siguiente:</p><ul><li>Normar el uso y goce de los espacios comunes.</li><li>Mantener el valor de los activos de la comunidad.</li><li>Mantener una sana convivencia entre todos los residentes de la comunidad.</li><li>Seguridad y Prevención de Riesgos de los residentes.</li><li>Ordenar el uso, goce y preservar las áreas comunes de la comunidad.</li><li>Complementar y aclarar reglamento de copropiedad, gravamen de cada unidad.</li></ul><p>De esta forma, en él se han definido una serie de normas y procedimientos que deberán ser observados por los copropietarios o sus arrendatarios para el uso de los bienes comunes, estableciéndose además la aplicación de multas ante ciertas situaciones, las que serán cobradas en conjunto con los gastos comunes. Cabe destacar que sobre los bienes de dominio común existe un derecho de propiedad de todos y cada uno de los copropietarios, en proporción al prorrateo respectivo.</p><p>El presente documento se enmarca en la dictación de normas vigentes a la fecha de publicación de este reglamento interno. Refleja la ley de copropiedad 21.442, la ley 21.020 sobre tenencia responsable de mascotas y las normas u ordenanzas municipales y gubernamentales.</p><p>El objetivo final de este Reglamento Interno es obtener una mejor calidad de vida para todos los residentes.</p>`},
        { id: 'articulo-1', icon: 'fas fa-volume-up', title: 'Artículo 1: Ruidos Molestos', content: `<p>1.1. Se prohíbe causar ruidos molestos que perturben la tranquilidad de los vecinos, especialmente entre las <strong>22:00 y las 08:00 horas</strong>.</p><p>1.2. El límite de ruido permitido es de 60 decibeles (ORD.MUN 06/2023).</p><p>1.3. Horarios para actividades de construcción y remodelación:</p><div class="schedule-container"><div class="schedule-card-detailed"><div class="header allowed"><i class="fas fa-check-circle"></i> Permitido</div><div class="body"><p class="day">Lunes a Sábado</p><div class="time-block"><p class="time">09:00 - 13:00</p></div><div class="time-block"><p class="time">15:00 - 18:00</p></div></div></div><div class="schedule-card-detailed"><div class="header prohibited"><i class="fas fa-times-circle"></i> Prohibido</div><div class="body"><p class="day">Domingos y Festivos</p><p class="status">TODO EL DÍA</p></div></div></div><p>1.4. Las infracciones a este artículo serán sancionadas con multas de 1 a 3 UTM, según la gravedad y reiteración de la falta.</p>`},
        { id: 'articulo-2', icon: 'fas fa-glass-cheers', title: 'Artículo 2: Reuniones Sociales', content: `<p>2.1. Horarios permitidos para reuniones sociales:</p><div class="schedule-container"><div class="schedule-card-detailed"><div class="header allowed"><i class="fas fa-check-circle"></i> Permitido</div><div class="body"><p class="day">Domingo a Jueves</p><div class="time-block"><p class="time">Hasta las 22:00</p></div></div></div><div class="schedule-card-detailed"><div class="header allowed"><i class="fas fa-check-circle"></i> Permitido</div><div class="body"><p class="day">Viernes, Sábados y Vísperas de Festivos</p><div class="time-block"><p class="time">Hasta las 02:00</p></div></div></div></div><p>2.2. Se debe cuidar los niveles de ruido provocados por artefactos o personas. La intensidad de los artefactos debe ser moderada.</p><p>2.3. Las actividades sociales podrán ser suspendidas por la Administración o el personal de Conserjería si alteran notoriamente la tranquilidad de cualquier residente.</p><p>2.4. Los residentes pueden solicitar la intervención de Carabineros de Chile o Seguridad Ciudadana para suspender actividades que causen molestias.</p><p>2.5. Para reuniones con más de 15 invitados, se debe informar la lista al conserje.</p><p>2.6. Se prohíbe que los invitados extiendan las fiestas a jardines o cualquier otro espacio común del condominio.</p><p>2.7. Las infracciones a este artículo serán sancionadas con multas de 1 a 3 UTM, según la gravedad de la falta.</p>`},
        { id: 'articulo-3', icon: 'fas fa-door-open', title: 'Artículo 3: Acceso al Condominio', content: `<p>3.1. El ingreso de visitas debe ser autorizado por un residente a través de la Plataforma Virtual o citófono.</p><p>3.2. Las mudanzas y cargas deben ser avisadas con 24 horas de anticipación. Se debe registrar el nombre, cédula de identidad, patente del vehículo y departamento involucrado.</p><p>3.3. Los servicios de delivery solo pueden ingresar hasta el acceso principal, y se permitirá un delivery a la vez. El proceso es:</p><ul><li>El residente debe avisar previamente a conserjería.</li><li>La entrega se realiza en el acceso principal de la torre.</li><li>El residente debe verificar que el delivery se retire.</li></ul><p>3.4. No se permitirá la entrada de personas sin autorización previa de un residente responsable.</p>`},
        { id: 'articulo-4', icon: 'fas fa-paw', title: 'Artículo 4: Animales Domésticos', content: `<p>En relación a la ley de copropiedad 21.442 y ley 21.020 sobre tenencia responsable de mascotas y animales de compañía:</p><ul><li>Los animales domésticos deben ser de tamaño y raza acorde a la vida en departamento.</li><li>Los dueños deben cumplir con todas las normas sanitarias, aseo y mantención para impedir malos olores o infecciones.</li><li>Está prohibida la libre circulación de mascotas sin compañía de su dueño.</li><li>Es obligatorio el uso de collar identificador con datos de la mascota y teléfono de contacto.</li><li>Las mascotas deben transitar amarradas y acompañadas por un adulto.</li><li>Los dueños son responsables de cualquier daño generado por sus mascotas.</li><li>Las suciedades deben ser recogidas inmediatamente por los dueños.</li><li>Se prohíbe dejar comida y/o agua para mascotas en sectores comunes.</li><li>Los dueños deben mantener limpios sus espacios para evitar malos olores hacia el exterior.</li><li>La adquisición de una nueva mascota debe ser comunicada a la Administración.</li><li>Los perros de razas consideradas agresivas (Rottweiler, Doberman, Pitbull y otros) deben circular en todo momento con un adulto y obligatoriamente con bozal.</li></ul><p>Las infracciones a este artículo serán sancionadas con multas de 1 a 3 UTM según la gravedad de la falta.</p>`},
        { id: 'articulo-5', icon: 'fas fa-trash-alt', title: 'Artículo 5: Desechos y Basura', content: `<p>5.1. Horario para la evacuación de basura:</p><div class="schedule-container"><div class="schedule-card-detailed"><div class="header allowed"><i class="fas fa-check-circle"></i> Permitido</div><div class="body"><p class="day">Todos los días</p><div class="time-block"><p class="time">09:00 - 22:00</p></div></div></div></div><p>5.2. La basura debe ser depositada en bolsas plásticas debidamente amarradas antes de ser evacuadas por el conducto de basura.</p><p>5.3. Se debe dejar libre de residuos y las puertas cerradas del shaft para evitar malos olores.</p><p>5.4. Está estrictamente prohibido arrojar por los ductos:</p><ul><li>Materiales de construcción</li><li>Elementos inflamables</li><li>Vidrios o cartones de gran tamaño</li></ul><p>5.5. Los materiales de construcción y escombros deben ser retirados por el contratista. No se permite su almacenaje en áreas comunes.</p><p>5.6. Se sugiere utilizar los puntos de reciclaje dispuestos por la municipalidad para botellas de vidrio y plástico.</p><p>5.7. Las infracciones a este artículo serán sancionadas con multas de 1 a 3 UTM según la gravedad de la falta.</p>`},
        { id: 'articulo-6', icon: 'fas fa-building', title: 'Artículo 6: Estética y Cierre de Balcones', content: `<p>6.1. Queda estrictamente prohibido:</p><ul><li>Colgar toallas, sábanas, frazadas, ropa, maceteros o cualquier otro elemento en las terrazas sobrepasando la línea visual del balcón hacia el exterior.</li><li>Arrojar objetos o desperdicios, sacudir alfombras, choapinos, felpudos, paños de aseo, etc. hacia el exterior de cada unidad.</li><li>Baldear las terrazas ni balcones.</li><li>Extender lonas, banderas, letreros, materiales plásticos o de otra naturaleza en murallas exteriores y barandas de los departamentos.</li><li>Dejar tendederos en calles comunes o exterior, u obstaculizar las entradas de las viviendas.</li></ul><p>6.2. Para el cierre de terrazas, se deberán seguir las siguientes indicaciones:</p><ul><li>Usar ventanales blancos de PVC, malla de seguridad para balcón o defensa de fierro (solo para departamentos a ras de suelo).</li><li>Para defensas de fierro: sentido vertical, grosor de 16 a 20 mm, separación entre barrotes entre 10 a 15 cm, color blanco, sin diseño.</li></ul><p>6.3. Las cortinas visibles desde el exterior deben ser de color crudo.</p><p>6.4. Todas las modificaciones deben ser autorizadas por la administración vía correo electrónico a <a href="mailto:condominiocumbresdequilpue@gmail.com">condominiocumbresdequilpue@gmail.com</a></p><p>6.5. El incumplimiento será multado desde 1 a 3 UTM según la gravedad de la falta.</p>`},
        { id: 'articulo-7', icon: 'fas fa-users', title: 'Artículo 7: Relaciones Administración-Residentes', content: `<p>7.1. El Comité de Administración y la Administración supervisarán y velarán por el buen funcionamiento del condominio.</p><p>7.2. La dependencia y relaciones directas del personal de servicio son con la administración.</p><p>7.3. Comunicación con la administración:</p><ul><li>Los residentes deben dirigir sus observaciones, reclamos o ideas al comité o la administración, no al personal de servicio.</li><li>Medios oficiales de comunicación: correo electrónico (<a href="mailto:condominiocumbresdequilpue@gmail.com">condominiocumbresdequilpue@gmail.com</a> y <a href="mailto:comitecumbresdequilpue@gmail.com">comitecumbresdequilpue@gmail.com</a>) y Libro de Novedades, Sugerencias y Reclamos en conserjería.</li><li>Para atención presencial, se debe agendar reunión vía correo electrónico.</li><li>Queda prohibido acudir directamente a los departamentos de los miembros del comité, realizar llamadas o enviar mensajes a sus teléfonos personales o citófonos.</li></ul><p>7.4. Personal de servicio:</p><ul><li>Tienen funciones y horarios definidos para el mantenimiento de las instalaciones comunes.</li><li>Está prohibido que realicen trabajos particulares para residentes durante sus horas de trabajo.</li><li>Los residentes no deben encargar tareas particulares al personal de servicio.</li></ul><p>7.5. Se prohíbe estrictamente a residentes o propietarios ingresar o hacer uso de: conserjería, bodega de conserjería, sala de bombas, salas de electricidad, estanques de agua, y medidores que no sean de su unidad, excepto en casos de emergencia.</p><p>7.6. El incumplimiento será multado desde 1 a 3 UTM según la gravedad de la falta.</p>`},
        { id: 'articulo-8', icon: 'fas fa-home', title: 'Artículo 8: Unidades y Departamentos', content: `<p>8.1. Las unidades son de uso exclusivo para habitación, según lo establecido en el Reglamento de Copropiedad.</p><p>8.2. Está estrictamente prohibido el uso de las unidades como:</p><ul><li>Oficinas</li><li>Consultorios médicos o de otro tipo</li><li>Oficinas profesionales</li><li>Clínicas</li><li>Peluquerías</li><li>Salones de belleza</li><li>Unidades de pensión</li><li>Saunas</li><li>Moteles</li><li>Otros negocios o industrias</li></ul><p>8.3. El mantenimiento y reparación de las unidades es responsabilidad exclusiva de cada propietario, incluyendo:</p><ul><li>Pisos, ventanas, puertas y demás bienes de uso exclusivo</li><li>Instalaciones de luz eléctrica, agua, gas, TV-cable, telefonía y ventilación</li><li>Limpieza y estética del exterior de la puerta de acceso (sin alterar la fachada o numeración)</li></ul><p>8.4. Se permite la instalación de mallas de seguridad en ventanales como medida de protección para niños.</p><p>8.5. El incumplimiento de este artículo será sancionado con multas de 1 a 3 UTM según la gravedad de la falta.</p>`},
        { id: 'articulo-9', icon: 'fas fa-car', title: 'Artículo 9: Estacionamientos y Circulación', content: `<p>9.1. Uso de estacionamientos:</p><ul><li>Prohibido almacenar mobiliario, bultos, cajones u otros desechos</li><li>No se permite estacionar en áreas comunes o de circulación</li><li>Prohibida la instalación de cobertores para vehículos (solo se permite capa protectora)</li><li>Los residentes deben usar solo sus estacionamientos asignados</li><li>Se recomienda solicitar logo vehicular con número de estacionamiento para identificación</li><li>Prohibido arrendar o enajenar estacionamientos a personas ajenas al condominio</li></ul><p>9.2. Estacionamientos de visitas:</p><ul><li>Uso exclusivo para visitas, máximo 8 horas continuas</li><li>Para visitas prolongadas, solicitar autorización a la administración</li><li>Estacionamientos para emergencia/minusválidos: máximo 12 horas, solo con credencial</li></ul><p>9.3. Circulación:</p><p><strong class="highlight-danger">La velocidad máxima permitida es de 10 km/hora</strong></p><ul><li>Circular con luces bajas encendidas</li><li>Prohibido tocar bocina, excepto para evitar accidentes</li><li>Entrada y salida peatonal solo por accesos peatonales</li></ul><p>9.4. Restricciones:</p><ul><li>Prohibido usar estacionamientos como zona de reparación o lavado de vehículos</li><li>No se permite el lavado de autos con derrame directo de agua</li><li>Prohibido usar calles internas como pista de carreras</li><li>Menores de edad en vehículos recreativos deben ser supervisados por adultos</li></ul><p>9.5. Se recomienda estacionarse en forma aculatada por razones de seguridad.</p><p>9.6. El incumplimiento será multado desde 1 a 3 UTM según la gravedad de la falta.</p>`},
        { id: 'articulo-10', icon: 'fas fa-tree', title: 'Artículo 10: Espacios Comunes', content: `<p>10.1. Los recintos de uso común pertenecen a todos los residentes. Las personas que los utilicen deberán:</p><ul><li>Procurar su conservación y tener especial cuidado en su correcta utilización.</li><li>Mantener la limpieza y el orden en todo momento.</li><li>Respetar los horarios establecidos para el uso de cada área común.</li></ul><p>10.2. Los daños o deterioros que se produzcan y que no correspondan a fallas o hechos fortuitos, serán de responsabilidad del residente que haya hecho uso de ellos. Los costos de reparación serán de su exclusivo cargo y agregados a sus gastos comunes.</p><p>10.3. El personal de turno del condominio deberá dejar constancia de los daños en el libro de novedades.</p><p>10.4. El Comité de Administración calificará las situaciones de daños producidos por falla o hechos fortuitos y procederá a resolver conforme a este reglamento.</p><p>10.5. Los accidentes que pudieren sufrir los copropietarios, usuarios o arrendatarios del condominio, sus familiares, visitas, empleados o dependientes, al usar los bienes comunes, no comprometen en modo alguno la responsabilidad del resto de los copropietarios, del Comité de Administración o de la Administración.</p><p>10.6. Los invitados sólo podrán hacer uso de los recintos de esparcimiento cuando sean acompañados por un residente y bajo las condiciones establecidas en la ley y Reglamento.</p><p><strong>10.7. Está estrictamente prohibido en los espacios comunes:</strong></p><ul><li>Fumar o beber alcohol.</li><li>Realizar asados con carbón o madera, incluyendo en los balcones de los departamentos.</li><li>Botar colillas de cigarros u otros objetos.</li><li>Almacenar materiales explosivos, húmedos, infecciosos o de mal olor.</li><li>Ocupar con muebles u otros objetos los pasillos, escaleras o cualquier otro espacio común, de forma que impida el goce de ellos por los demás propietarios.</li></ul><p><strong class="highlight-danger">10.8. El incumplimiento será multado desde 1 a 3 UTM según la gravedad de la falta.</strong></p>`},
        { id: 'articulo-11', icon: 'fas fa-truck-moving', title: 'Artículo 11: Mudanzas y Traslados', content: `<p>11.1. Toda mudanza deberá informarse a la administración o a conserjería con 48 horas de anticipación, enviando un correo electrónico a la administración por parte del dueño de la propiedad.</p><p>11.2. Horarios permitidos para mudanzas:</p><div class="schedule-container"><div class="schedule-card-detailed"><div class="header allowed"><i class="fas fa-check-circle"></i> Permitido</div><div class="body"><p class="day">Lunes a Sábado</p><div class="time-block"><p class="time">09:00 - 18:00</p></div></div></div><div class="schedule-card-detailed"><div class="header prohibited"><i class="fas fa-times-circle"></i> Prohibido</div><div class="body"><p class="day">Domingo y Festivos</p><p class="status">TODO EL DÍA</p></div></div></div><p><strong class="highlight-danger">* No se puede empezar antes, ni terminar después de los horarios establecidos.</strong></p><p>11.3. Cualquier daño que se produzca por la realización de la mudanza será cobrado al departamento involucrado en el próximo gasto común, más una multa de 1 a 3 UTM.</p><p>11.4. El personal deberá resguardar la integridad de los comuneros y de los bienes comunes, tomando medidas que vayan desde solicitar extremar precauciones hasta prohibir el acceso si no se cuenta con las medidas de seguridad adecuadas.</p><p><strong class="highlight-danger">11.5. El incumplimiento será multado desde 1 a 3 UTM según la gravedad de la falta.</strong></p>`},
        { id: 'articulo-12', icon: 'fas fa-key', title: 'Artículo 12: Arriendos', content: `<p>12.1. Es responsabilidad del propietario comunicar por escrito mediante correo electrónico o registrar en conserjería:</p><ul><li>El nombre de su arrendatario o de las personas que usan o usarán la unidad, aunque no sean arrendatarios.</li><li>Los nombres de los respectivos acompañantes.</li></ul><p>12.2. La responsabilidad por los daños a las instalaciones comunes en que incurrieren los arrendatarios o usuarios será incluida en los gastos comunes de la unidad del propietario.</p><p>12.3. Los conserjes no están autorizados para recibir ni entregar llaves. Si lo hacen, serán sancionados junto con el departamento que solicitó hacerlo.</p><p><strong>12.4. Queda estrictamente prohibido arrendar bodegas o estacionamientos a personas ajenas al condominio.</strong></p><p><strong class="highlight-danger">12.5. El incumplimiento será multado desde 1 a 3 UTM según la gravedad de la falta.</strong></p>`},
        { id: 'articulo-13', icon: 'fas fa-fire-extinguisher', title: 'Artículo 13: Prevención de Incendios', content: `<p>Debido a las condiciones naturales del condominio y su emplazamiento en una zona boscosa, se deberá tener especial cuidado en la prevención y cuidado de todo el condominio:</p><p>13.1. Queda estrictamente prohibido realizar cualquier actividad que pueda generar un riesgo de incendio en las áreas comunes del condominio, ya sea por descuido, negligencia o imprudencia.</p><p>13.2. Se considerarán faltas graves que atentan contra la seguridad de todos los residentes y las instalaciones del condominio, las siguientes conductas:</p><ul><li>Arrojar colillas de cigarrillos encendidas o cualquier tipo de material en combustión en áreas comunes.</li><li>Utilizar parrillas, braseros o cualquier otro artefacto que requiera el uso de carbón, leña u otro material combustible sólido en terrazas, balcones o áreas comunes.</li><li>Almacenar o dejar materiales inflamables, explosivos o de fácil combustión en áreas comunes.</li><li>Obstruir o bloquear las vías de evacuación, salidas de emergencia, extintores o cualquier otro elemento de seguridad contra incendios.</li><li>Realizar cualquier tipo de manipulación indebida de las instalaciones de gas, electricidad u otras que puedan derivar en un riesgo de incendio.</li><li>Cualquier otra acción u omisión que, a juicio del Comité de Administración y la Administración, implique un riesgo evidente de provocar un incendio en el condominio.</li></ul><p>13.3. Las infracciones descritas en este artículo serán sancionadas como faltas graves, aplicándose las multas correspondientes establecidas en el Artículo 19 del presente Reglamento.</p><p>13.4. En caso de reincidencia o de producirse un incendio por cualquiera de las conductas prohibidas, se aplicarán las multas más elevadas y se evaluará la aplicación de sanciones adicionales contempladas en el Reglamento de Copropiedad y la legislación vigente, no descartando un proceso judicial.</p><p>13.5. Todos los copropietarios, residentes y visitas deberán acatar estrictamente las normas de prevención de incendios y las instrucciones del personal de administración y de los organismos de emergencia en caso de cualquier eventualidad de este tipo.</p>`},
        { id: 'articulo-14', icon: 'fas fa-hands-helping', title: 'Artículo 14: Convivencia en Comunidad', content: `<p>14.1. Toda agresión física o verbal a residentes del condominio, así como a sus trabajadores o a los bienes de la comunidad será multada con un mínimo de 1 UTM hasta un máximo de 3 UTM, dependiendo de la gravedad del hecho.</p><p>14.2. Los incidentes de agresión podrán ser denunciados ante la autoridad correspondiente.</p><p><strong>14.3. Esta reglamentación aplica a todo tipo de residentes, incluyendo sus visitas y familiares.</strong></p>`},
        { id: 'articulo-15', icon: 'fas fa-video', title: 'Artículo 15: Uso de Grabaciones y Fotografías', content: `<p>15.1. El condominio cuenta con un circuito cerrado de cámaras de seguridad instaladas en diversas áreas comunes.</p><p>15.2. Las grabaciones y fotografías obtenidas serán utilizadas con fines de:</p><ul><li>Seguridad</li><li>Control del cumplimiento de las normas establecidas en el presente Reglamento Interno y el Reglamento de Copropiedad</li></ul><p>15.3. El Comité de Administración y la Administración podrán emplear las grabaciones y fotografías como evidencia para:</p><ul><li>Determinar la ocurrencia de infracciones y faltas cometidas por copropietarios, residentes, arrendatarios, visitas o cualquier otra persona al interior del condominio</li><li>Cursar las multas correspondientes conforme a lo estipulado en el presente Reglamento</li></ul><p>15.4. Los copropietarios, residentes y demás personas que ingresen al condominio aceptan y autorizan que las grabaciones y fotografías obtenidas mediante el circuito de cámaras de seguridad puedan ser utilizadas para los fines antes descritos.</p><p>15.5. El uso de las grabaciones y fotografías se realizará respetando la normativa vigente en materia de protección de datos personales y privacidad.</p>`},
        { id: 'articulo-16', icon: 'fas fa-child', title: 'Artículo 16: Uso de Áreas Comunes por Niños y Responsabilidades de Padres o Tutores', content: `<p>Debido a la necesidad de crear un buen ambiente para los menores y en vista de los conflictos que se han suscitado, es imperante crear un marco normativo para el buen uso de las áreas, por lo que se indica lo siguiente:</p><ol><li>Las áreas comunes del condominio destinadas para recreación y esparcimiento, tales como plazas, jardines y áreas de juegos infantiles, podrán ser utilizadas por los niños residentes para sus actividades lúdicas y recreativas.</li><li>Quedan excluidas como zonas de juego para niños las siguientes áreas comunes: bodegas, estacionamientos, pasillos de torres, conserjería, salas de basura y cualquier otro lugar que represente un riesgo para su seguridad o que interfiera con el normal funcionamiento de las instalaciones del condominio.</li><li>Los padres, madres o tutores legales de los niños serán directa y plenamente responsables por cualquier daño, deterioro o perjuicio que éstos ocasionen en las áreas comunes del condominio durante el desarrollo de sus actividades recreativas.</li><li>Es obligación de los padres, madres o tutores legales mantener el orden, limpieza y aseo de las áreas comunes utilizadas por los niños a su cargo, retirando cualquier desecho o elemento utilizado para el juego una vez finalizada la actividad.</li><li>Los padres, madres o tutores legales deberán supervisar en todo momento a los niños bajo su cuidado mientras permanezcan en las áreas comunes, velando por su seguridad e integridad, así como por el respeto a las normas de convivencia y al derecho al descanso de los demás residentes.</li><li>Queda estrictamente prohibido cualquier tipo de conducta agresiva, violenta, acoso, bullying o discriminación por parte de niños hacia otros niños o residentes dentro del condominio. Los padres, madres o tutores legales serán responsables de prevenir e impedir este tipo de situaciones.</li><li>En caso de incumplimiento de las disposiciones contenidas en este artículo, se aplicarán las multas correspondientes conforme al Artículo 19 del presente Reglamento, sin perjuicio de que el Comité de Administración y la Administración puedan adoptar medidas adicionales en resguardo de la seguridad y convivencia de la comunidad.</li><li>Se insta a todos los residentes a promover una cultura de respeto, tolerancia y buena convivencia, fomentando valores como la solidaridad, empatía y resolución pacífica de conflictos entre los niños y sus familias.</li></ol>`},
        { id: 'articulo-17', icon: 'fas fa-money-bill-wave', title: 'Artículo 17: Morosidad en Gastos Comunes', content: `<p>Según lo establecido en la ley de copropiedad 21.442, principalmente en los artículos 7, 20 y otros, se refuerzan las sanciones administrativas para las unidades morosas de sus gastos comunes, en 3 o más meses consecutivos o no, donde la administración y el comité de administración, tendrán facultad expresa para suspender o requerir suspensión del servicio eléctrico, de telecomunicaciones o de calefacción, según se considere el caso.</p>`},
        { id: 'articulo-18', icon: 'fas fa-clipboard-list', title: 'Artículo 18: Registro de Residentes', content: `<p>En cumplimiento de lo dispuesto en el artículo 5 de la Ley 21.442 sobre Copropiedad Inmobiliaria, el condominio llevará un Registro de Residentes actualizado, en el cual deberán inscribirse todos los copropietarios, arrendatarios y cualquier otra persona que resida de manera permanente o temporal en las unidades del condominio.</p><ul><li>Será obligación de cada copropietario informar por escrito a la Administración los nombres completos, cédulas de identidad y demás antecedentes que se soliciten de todas las personas que residan en su unidad, ya sean arrendatarios, familiares u otros, dentro de los 15 días siguientes al inicio de la residencia.</li><li>Los copropietarios deberán informar cualquier modificación en la nómina de residentes de su unidad dentro del mismo plazo de 15 días.</li><li>La Administración tendrá la facultad de solicitar la renovación de los antecedentes contenidos en el Registro de Residentes cada 12 meses o cuando lo estime conveniente.</li><li>El Registro de Residentes será de carácter reservado y la información contenida en él será utilizada exclusivamente para fines propios de la administración del condominio, resguardando la protección de datos personales conforme a la normativa vigente.</li><li>El incumplimiento de la obligación de inscribir o actualizar los antecedentes de residentes en el registro habilitado para tales efectos, será considerado una falta grave y se aplicará la multa correspondiente de acuerdo al artículo 19 del presente Reglamento.</li></ul>`},
        { id: 'articulo-19', icon: 'fas fa-exclamation-triangle', title: 'Artículo 19: Infracciones y Multas', content: `<p>Ante la infracción de cualquier norma estipulada o no en las presentes Normas de reglamento interno como en el de copropiedad que no esté específicamente señalada, se sancionará con multa de 1 a 3 UTM y la reincidencia se considerará como agravante a la falta cometida, producida en un período de 6 meses, desde la ocurrencia de la primera infracción.</p><p>Las faltas se clasifican en:</p><ul><li><strong>Faltas leves (Multa de 1 UTM):</strong> Infracciones menores que no causen daños ni molestias significativas a otros copropietarios/residentes o a los bienes comunes. Por ejemplo: hacer ruidos molestos por un breve período, no recoger las suciedades de las mascotas, entre otras.</li><li><strong>Faltas graves (Multa de 2 UTM):</strong> Infracciones que causen molestias, perjuicios o riesgos relevantes a otros copropietarios/residentes o a los bienes comunes. Por ejemplo: producir ruidos molestos en horarios de descanso, realizar fiestas/reuniones que alteren la tranquilidad, causar daños menores en áreas comunes, entre otras.</li><li><strong>Faltas muy graves (Multa desde 3 UTM):</strong> Infracciones que causen daños materiales significativos, pongan en riesgo la seguridad, impliquen agresiones físicas/verbales, actividades ilegales o reiteración de faltas graves. Por ejemplo: causar daños graves en áreas comunes, actividades que atenten contra la convivencia, agresiones, entre otras.</li></ul><p>El Comité de Administración, en conjunto con la administración, determinará la gravedad de la falta y aplicará la multa correspondiente, dejando constancia de los hechos y fundamentos.</p>`},
        { id: 'articulo-20', icon: 'fas fa-gavel', title: 'Artículo 20: De la Reconsideración de Multas y Proceso de Infracciones', content: `<h3>20.1 Reconsideración de Multas</h3><p>Ante el curse de cualquier infracción, en cualquiera de las disposiciones disponibles, tanto en el presente REGLAMENTO INTERNO, como en el REGLAMENTO DE COPROPIEDAD, el copropietario o residente a cargo de la unidad, puede presentar un recurso de reconsideración, dentro de los primeros 15 días corridos desde la notificación de la multa, donde podrá solicitar la condonación total o parcial de lo cobrado, expresando sus situaciones o motivos específicos, las cuales serán analizadas entre comité de administración y la administración, quienes resolverán a la brevedad posible, considerando todos los hechos disponibles o que se les entreguen.</p><p>La presentación del recurso deberá ser enviada por correo electrónico al correo de la administración: <a href="mailto:condominiocumbresdequilpue@gmail.com">condominiocumbresdequilpue@gmail.com</a></p><h3>20.2 Resumen del Proceso de Infracciones</h3><table><tr><th>Etapa</th><th>Descripción</th></tr><tr><td>Identificación de falta</td><td><ul><li>El copropietario/residente que identifique alguna falta, informará inmediatamente aquella situación a conserjería.</li><li>El conserje verificará y dejará constancia en bitácora e informará a administración de lo sucedido.</li><li>Se sugiere respaldar lo evidenciado con un correo electrónico a administración, adjuntando cualquier medio de prueba (audio, video o fotografías) si hubiera para tener respaldo de la falta.</li></ul></td></tr><tr><td>Notificación de la multa</td><td>El Comité de Administración y la Administración notifican al copropietario/residente sobre la multa aplicada por correo electrónico, indicando la falta cometida y el monto de la multa.</td></tr><tr><td>Plazo para apelar</td><td>El copropietario/residente tiene un plazo de 15 días corridos desde la notificación para presentar un recurso de reconsideración solicitando la condonación total o parcial de la multa.</td></tr><tr><td>Presentación del recurso</td><td>El recurso debe ser enviado por correo electrónico a la Administración, exponiendo las situaciones o motivos específicos que justifiquen la reconsideración de la multa.</td></tr><tr><td>Análisis del recurso</td><td>El Comité de Administración y la Administración analizan el recurso, considerando los hechos y antecedentes presentados por el copropietario/residente.</td></tr><tr><td>Resolución</td><td>El Comité de Administración y la Administración resuelven a la brevedad posible, determinando si se acoge total o parcialmente el recurso, o si se mantiene la multa original.</td></tr><tr><td>Notificación de la resolución</td><td>Se notifica al copropietario/residente sobre la resolución adoptada respecto a su recurso de reconsideración.</td></tr></table>`},
        { id: 'modificacion', icon: 'fas fa-file-alt', title: 'Modificación del Reglamento Interno', content: `<p>El Comité de Administración, en conjunto con la administración, verificará una vez al año el presente reglamento interno y hará las modificaciones que se necesiten de acuerdo las actuales necesidades de la comunidad. Sin perjuicio de lo anterior, se presentará en cada siguiente reunión de la asamblea de copropietarios para recibir sugerencias.</p><p>Se faculta a cualquier miembro de la administración, para reducir a escritura pública el presente documento.</p>`}
    ];

    const articlesContainer = document.getElementById('articles-container');
    
    articlesData.forEach(data => {
        const articleEl = document.createElement('div');
        articleEl.className = 'article';
        articleEl.id = data.id;
        articleEl.innerHTML = `
            <div class="article-title">
                <i class="${data.icon}"></i>
                <span>${data.title}</span>
                <i class="fas fa-chevron-down chevron-icon"></i>
            </div>
            <div class="article-content">${data.content}</div>
        `;
        articlesContainer.appendChild(articleEl);
    });

    articlesContainer.addEventListener('click', e => {
        const title = e.target.closest('.article-title');
        if (title) title.parentElement.classList.toggle('active');
    });

    // --- THEME TOGGLE ---
    const themeToggle = document.getElementById('theme-toggle');
    const currentTheme = localStorage.getItem('theme');
    if (currentTheme === 'dark') {
        document.body.classList.add('dark-mode');
        themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
    }
    themeToggle.addEventListener('click', () => {
        document.body.classList.toggle('dark-mode');
        let theme = 'light';
        if (document.body.classList.contains('dark-mode')) {
            theme = 'dark';
            themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        } else {
            themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
        }
        localStorage.setItem('theme', theme);
    });

    // --- POPUP/MODAL LOGIC ---
    function showPopup(popupId) { document.getElementById(popupId)?.classList.add('show'); }
    function hidePopup(popupId) { document.getElementById(popupId)?.classList.remove('show'); }
    document.querySelectorAll('.popup .close').forEach(btn => btn.addEventListener('click', () => hidePopup(btn.dataset.popupId)));
    document.querySelectorAll('.popup').forEach(popup => popup.addEventListener('click', (e) => { if (e.target === popup) hidePopup(popup.id); }));

    // --- FONT SIZE CONTROLS ---
    let currentFontSize = 16;
    document.getElementById('decrease-font').addEventListener('click', () => {
        currentFontSize = Math.max(12, currentFontSize - 1);
        document.body.style.fontSize = currentFontSize + 'px';
    });
    document.getElementById('increase-font').addEventListener('click', () => {
        currentFontSize = Math.min(22, currentFontSize + 1);
        document.body.style.fontSize = currentFontSize + 'px';
    });
    
    // --- ACTION BUTTONS LOGIC ---
    const tips = [
        { text: "Recuerda que la velocidad máxima dentro del condominio es de 10 km/h.", source: "Artículo 9" },
        { text: "Las mascotas deben transitar siempre con correa y acompañadas por un adulto.", source: "Artículo 4" },
        { text: "Está prohibido colgar ropa, toallas o alfombras en los balcones.", source: "Artículo 6" },
        { text: "Las mudanzas no están permitidas los domingos ni festivos.", source: "Artículo 11" },
        { text: "No se pueden realizar asados con carbón o leña en terrazas y balcones.", source: "Artículo 10" },
        { text: "Informa a la administración si tienes un nuevo arrendatario o residente.", source: "Artículo 18" },
        { text: "Utiliza solo tu estacionamiento asignado. No ocupes los de visita ni áreas comunes.", source: "Artículo 9" },
        { text: "Deposita la basura en bolsas bien amarradas entre las 09:00 y 22:00 horas.", source: "Artículo 5" },
        { text: "Los perros de razas potencialmente peligrosas deben usar bozal en áreas comunes.", source: "Artículo 4" },
        { text: "Cualquier modificación a la fachada o balcón debe ser autorizada por la administración.", source: "Artículo 6" }
    ];
    function showRandomTip() {
        const randomTip = tips[Math.floor(Math.random() * tips.length)];
        document.getElementById('tip-text').textContent = randomTip.text;
        document.getElementById('tip-source').textContent = "Fuente: " + randomTip.source;
    }
    document.getElementById('show-tip').addEventListener('click', () => { showRandomTip(); showPopup('tip-popup'); });
    document.getElementById('next-tip').addEventListener('click', showRandomTip);
    document.getElementById('whatsapp-button').addEventListener('click', () => showPopup('whatsapp-popup'));
    document.getElementById('confirm-whatsapp').addEventListener('click', () => { window.open('https://wa.me/56971030049', '_blank'); hidePopup('whatsapp-popup'); });
    document.getElementById('cancel-whatsapp').addEventListener('click', () => hidePopup('whatsapp-popup'));
    document.getElementById('alert-button').addEventListener('click', () => showPopup('alert-popup'));
    document.getElementById('confirm-alert').addEventListener('click', () => {
        const subject = encodeURIComponent('Reporte de Infracción');
        const body = encodeURIComponent('Por favor, describa la infracción y el artículo relacionado:');
        window.location.href = `mailto:Condominiocumbresdequilpue@gmail.com,comitecumbresdequilpue@gmail.com?subject=${subject}&body=${body}`;
        hidePopup('alert-popup');
    });
    document.getElementById('cancel-alert').addEventListener('click', () => hidePopup('alert-popup'));

    // --- SEARCH & HIGHLIGHT LOGIC ---
    const searchInput = document.getElementById('search-input');
    const searchResultsContainer = document.getElementById('search-results');

    function clearAllHighlights() {
        document.querySelectorAll('.search-highlight-permanent').forEach(el => {
            el.replaceWith(el.textContent);
        });
    }

    function highlightTextInArticle(articleElement, term) {
        if (!term || !articleElement) return;
        const regex = new RegExp(`(${term.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&')})`, 'gi');
        const content = articleElement.querySelector('.article-content');
        
        const walker = document.createTreeWalker(content, NodeFilter.SHOW_TEXT, null, false);
        let node;
        const nodesToProcess = [];
        while (node = walker.nextNode()) {
            if (node.parentElement.tagName !== 'SCRIPT' && node.parentElement.tagName !== 'STYLE' && node.nodeValue.match(regex)) {
                nodesToProcess.push(node);
            }
        }

        nodesToProcess.forEach(node => {
            const span = document.createElement('span');
            span.innerHTML = node.nodeValue.replace(regex, `<span class="search-highlight-permanent">$1</span>`);
            node.parentNode.replaceChild(span, node);
        });
    }

    function performSearch() {
        clearAllHighlights();
        const searchTerm = searchInput.value.trim().toLowerCase();
        if (searchTerm.length < 3) {
            searchResultsContainer.innerHTML = '<p>Por favor, ingrese al menos 3 caracteres para buscar.</p>';
            showPopup('search-results-popup');
            return;
        }
        let resultsHTML = '';
        const regex = new RegExp(`(${searchTerm.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&')})`, 'gi');
        articlesData.forEach(article => {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = article.content;
            const contentText = tempDiv.textContent || tempDiv.innerText || "";
            if (article.title.toLowerCase().includes(searchTerm) || contentText.toLowerCase().includes(searchTerm)) {
                let snippet = '';
                const matchIndex = contentText.toLowerCase().indexOf(searchTerm);
                if (matchIndex !== -1) {
                    const startIndex = Math.max(0, matchIndex - 50);
                    const endIndex = Math.min(contentText.length, matchIndex + 150);
                    snippet = (startIndex > 0 ? '...' : '') + contentText.substring(startIndex, endIndex) + (endIndex < contentText.length ? '...' : '');
                } else {
                    snippet = contentText.substring(0, 200) + '...';
                }
                snippet = snippet.replace(regex, `<span class="highlight">$1</span>`);
                resultsHTML += `<div class="search-result-item" data-target-id="${article.id}"><strong>${article.title}</strong><p>${snippet}</p></div>`;
            }
        });
        searchResultsContainer.innerHTML = resultsHTML || '<p>No se encontraron resultados.</p>';
        showPopup('search-results-popup');
    }

    document.getElementById('search-button').addEventListener('click', performSearch);
    searchInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') performSearch(); });

    searchResultsContainer.addEventListener('click', (e) => {
        const resultItem = e.target.closest('.search-result-item');
        if (resultItem) {
            const targetId = resultItem.dataset.targetId;
            const targetArticle = document.getElementById(targetId);
            if (targetArticle) {
                hidePopup('search-results-popup');
                clearAllHighlights();
                document.querySelectorAll('.article.active').forEach(active => active.classList.remove('active'));
                targetArticle.classList.add('active');
                targetArticle.scrollIntoView({ behavior: 'smooth', block: 'center' });
                highlightTextInArticle(targetArticle, searchInput.value.trim());
            }
        }
    });
});
</script>

</body>
</html>

